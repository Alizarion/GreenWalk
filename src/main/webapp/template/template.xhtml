<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//FR" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:gw="http://java.sun.com/jsf/composite/component"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:f="http://java.sun.com/jsf/core">
<f:view locale="fr">
    <h:head>
        <h:outputStylesheet library="css" name="main.css" />
        <h:outputScript library="js" name="jquery.lightbox-0.5.js"/>
        <h:outputStylesheet library="css" name="jquery.lightbox-0.5.css"/>
        <h:outputScript library="js" name="main.js"/>
    </h:head>

    <h:body>


        <ui:insert name="viewparam">


        </ui:insert>

        <h:panelGroup  rendered="#{request.userPrincipal != null}" styleClass="menuhead">
            <div class="menu accountMenu">
                <ol style="display: inline-block">

                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.my.account.button-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="useredit-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.my.subscribed.event-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="next-missions-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.my.create.event-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="community-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.my.last.declaration-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="community-outcome"/>
                    </li>
                    <li class="menuItem">
                        <a href="#">
                            <h:outputText
                                    id="notifications"
                                    value="#{lang['page.template.my.notifications-'.concat(sessionAttributeCtrl.selectedLang.key)]} (#{fn:length(notificationCenterCtrl.notifications)})"
                                    />
                        </a>
                        <p:overlayPanel id="chartPanel"  appendToBody="true" for="notifications" hideEffect="fade">
                            <gw:notificationList
                                    notifications="#{notificationCenterCtrl.notifications}"/>
                        </p:overlayPanel>
                    </li>
                    <li class="menuItem">
                        <h:form>
                            <h:commandLink
                                    action="#{loginCtrl.logout(facesContext)}"
                                    icon="ui-icon-arrowrefresh-1-w"
                                    value="#{lang['page.template.logout.button-'.concat(sessionAttributeCtrl.selectedLang.key)]}"/>
                        </h:form>

                    </li>
                </ol>
            </div>
        </h:panelGroup>
        <div class="head">
            <div onclick="window.location.href='#{app['APP_URL']}'"
                 class="logo">
            </div>

            <div class="menu" >
                <ol style="display: inline-block">
                    <li class="menuItem">
                        <h:link
                                styleClass="homeButton"
                                outcome="community-outcome">
                            <div  class="homeButton"></div>
                        </h:link>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['common.menu.label.about.us-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="community-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.next.missions.link-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="next-missions-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.local.action.link-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="community-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.tri.memo.link-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="community-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.partners.link-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="next-missions-outcome"/>
                    </li>
                    <li class="menuItem">
                        <h:link
                                value="#{lang['page.template.declare.picked.link-'.concat(sessionAttributeCtrl.selectedLang.key)]}"
                                outcome="next-missions-outcome"/>
                    </li>


                </ol>
            </div>
        </div>

        <ui:insert name="center">


        </ui:insert>


        <div id="commentAndEvent">
            <div id="contentLeft">
                <ui:insert name="contentLeft">
                </ui:insert>
            </div>

            <div id="contentRight">
                <ui:insert name="contentRight">
                </ui:insert>
            </div>
        </div>

        <div style="clear: both;"></div>
        <div class="footerContainer">
            <ui:insert name="footerContent">
            </ui:insert>
        </div>

        <p:growl  widgetVar="growl" id="growlMsg" showDetail="true">

        </p:growl>
        <h:form prependId="false">
            <p:remoteCommand name="growlRemoteUpdater"  update=":growlMsg"/>
        </h:form>
        <script type="text/javascript">

            $(function() {
                createLightBox();

            });

            function createLightBox(){
                var ratio = Math.round((screen.width * 65)/100);
                $("a.lightBox").each(function() {
                    $(this).lightBox({fixedNavigation:true});
                    return $(this).replaceAttr('hreflang', '[width]', ratio);
                });


            }
        </script>

        <h:panelGroup id="google" >
            <script type="text/javascript">
                function hideOnSuccess(xhr, status, args,dialogToHide) {
                    if (args) {
                        var isValid = args.isValid;
                        if (isValid) {
                            dialogToHide.hide();
                        }
                    }
                }
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', "#{app['GOOGLE_ANALYTICS_UA']}"]);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>

        </h:panelGroup>

    </h:body>

</f:view>
</html>