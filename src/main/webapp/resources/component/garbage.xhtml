<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets"

      xmlns:f="http://java.sun.com/jsf/core">

<cc:interface>

    <cc:attribute
            name="wastes"
            type="java.util.List"
            required="false"/>
    <cc:attribute
            name="width"
            type="java.lang.String"
            required="true"/>
    <cc:attribute
            name="height"
            type="java.lang.String"
            required="true"/>

    <cc:attribute
            name="startWastes"
            type="java.lang.String"
            required="false"/>

</cc:interface>


<cc:implementation>
    <h:outputScript library="primefaces" name="jquery/jquery.js"/>
    <h:outputScript library="garbage" name="mouse.js"/>
    <h:outputScript library="garbage" name="Box2dWeb-2.1.a.3.js"/>
    <h:outputScript library="garbage" name="box2d.js"/>
    <h:outputScript library="garbage" name="loader.js"/>
    <h:outputScript library="garbage" name="entities.js"/>

    <h:outputStylesheet library="css" name="main.css" />


    <div  style="width: #{cc.attrs.width}px;height:#{cc.attrs.height}px;" id="garbagecontainer">
        <canvas id="garbageCanvas"
                width="#{cc.attrs.width}"
                height="#{cc.attrs.height}"
                class="garbagelayer"/>
        <div id="loadingscreen" class="garbagelayer">
            <div id="loadingmessage"></div>
        </div>
    </div>
    <h:outputScript library="garbage" name="garbage.js"/>
    <script type="text/javascript">
     //   garbage.pushEntities( {type:'waste',value:Math.round(((Math.random()*150)+10)), name:'food-cardboard', x:(Math.random()*200),y:0,calories:420});
        $(window).load(function() {
            garbage.width = '#{cc.attrs.width}';
            garbage.height = '#{cc.attrs.height}';
          garbage.entities.push(#{cc.attrs.startWastes});
            garbage.init();
        });
    </script>
    <!--canvas id="debugcanvas" width="1000" height="430" style="border: solid 1px #000000"></canvas-->
</cc:implementation>

</html>
